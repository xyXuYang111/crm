<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:rabbit="http://www.springframework.org/schema/rabbit"
       xsi:schemaLocation="
            http://www.springframework.org/schema/beans
                http://www.springframework.org/schema/beans/spring-beans.xsd
            http://www.springframework.org/schema/context
                http://www.springframework.org/schema/context/spring-context.xsd
            http://www.springframework.org/schema/rabbit
                http://www.springframework.org/schema/rabbit/spring-rabbit-1.0.xsd">

    <context:property-placeholder location="classpath:properties/xuyang.properties" />
    <!-- 连接服务配置  -->
    <rabbit:connection-factory id="connectionFactoryRabbit" host="${rabbitMq.url}" username="${rabbitMq.userName}"
                               password="${rabbitMq.password}" port="${rabbitMq.port}"  />

    <rabbit:admin connection-factory="connectionFactoryRabbit"/>

    <!-- queue 队列声明-->
    <!-- 定义direct exchange，绑定queueTest -->
    <!-- 交换机的四种模式：
        direct：转发消息到 routigKey 指定的队列。
        topic：按规则转发消息（最灵活）。
        headers：（这个还没有接触到）
        fanout：转发消息到所有绑定队列 -->
    <rabbit:direct-exchange id="amqpExchange" name="amqpExchange" durable="true" auto-delete="false">
        <rabbit:bindings>
            <rabbit:binding queue="${rabbitMq.queue_1}" key="${rabbitMq.queue_key_1}"/>
            <rabbit:binding queue="${rabbitMq.queue_2}" key="${rabbitMq.queue_key_2}"/>
            <rabbit:binding queue="${rabbitMq.queue_3}" key="${rabbitMq.queue_key_3}"/>
        </rabbit:bindings>
    </rabbit:direct-exchange>

    <!-- spring template声明-->
    <rabbit:template exchange="amqpExchange" id="amqpTemplate"  connection-factory="connectionFactoryRabbit"/>
</beans>