<!DOCTYPE html>
<html lang="zh-CN">

<!-- Mirrored from www.nonelonely.com/article/1547789396163 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 09 Sep 2019 05:04:28 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>

    <title>SpringBoot之认识Spring Data Jpa- 书生个人博客</title>
    <link href="../static/plugins/editormd/css/editormd.min.css" rel="stylesheet" type="text/css">
    <meta charset="UTF-8">
<meta name="baidu_union_verify" content="3e514e79dc5e7201b9bee186137e9562">
<meta name="keywords" content="springboot系列">

<meta name="description" content="很早之前就想写关于JPA的文章了，但是基于到时很赖，写不下来，那今天我们就慢慢的开始写，写多少就多少吧！什么是JPAJPA是JavaPersistenceAPI的简称，JPA是一个基于O/R映射的标准规范，因此任何声称符合JPA标准的框架都遵循同样的架构，提供相同的访问API，这保证了基于JPA开发的企业应用能够经过少量的修改就能够在不同的JPA框架下运行。而JPA是需要Provider来实现其功能的，Hibernate就是J">

<meta name="renderer" content="webkit">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<link rel="stylesheet" href="../static/plugins/layui/css/layui.css">
<link rel="stylesheet" href="../static/plugins/font-awesome/css/font-awesome.min.css">
<link rel="stylesheet" href="../static/assets/css/frontend/base.css">
<script>
    var _hmt = _hmt || [];
    (function() {
        var hm = document.createElement("script");
        hm.src = "../../hm.baidu.com/hm6618.js?c07ddd5b98c69450ebd8e255627f70b0";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>

    <link rel="canonical" href="1547789396163.html"/>
    <script src="../../msite.baidu.com/sdk/cb688.js?appid=1622832448885693"></script>
    <script src="../static/plugins/jquery/jquery.min.js"></script>
     <style>
         @media screen and (max-width: 767px) {
             .layui-layer-page {
                 display: none;
             }
         }

         .markdown-body.layui-layer-content {
             padding: 20px;
             /*background-image: url("/static/assets/img/long.png");*/
         }
         .markdown-body  .layui-layer-title{
             background-color: #e4e4e400;
         }
         .markdown-body  .layui-layer{
             background-color: #e4e4e4;
             background-image: url("../static/assets/img/long.png") ;
             background-size: 100% 100%;
         }
         .markdown-body .layui-layer-content {

            padding: 20px;
         }

     </style>

</head>
<body class="animated fadeIn">

<div class="wrapper" >
    <header>
    <div class="headtop"></div>
    <div class="contenttop">
        <div class="logo f_l"> Java码猿-书生个人博客</div>
        <div class="search f_r">
            <input name="keyboard"  id="bdcsMain" class="input_text" value="请输入关键字" style="color: rgb(153, 153, 153);" onfocus="if(value=='请输入关键字'){this.style.color='#000';value=''}" onblur="if(value==''){this.style.color='#999';value='请输入关键字'}" type="text">
            <input name="Submit" class="input_submit" onclick="window.open('http://zhannei.baidu.com/cse/search?s=6583887351044514798&entry=1&q='+document.getElementById('bdcsMain').value)" value="搜索" type="button">
            <!--<script type="text/javascript">(function(){document.write(unescape('%3Cdiv id="bdcs"%3E%3C/div%3E'));var bdcs = document.createElement('script');bdcs.type = 'text/javascript';bdcs.async = true;bdcs.src = 'http://znsv.baidu.com/customer_search/api/js?sid=6583887351044514798' + '&plate_url=' + encodeURIComponent(window.location.href) + '&t=' + Math.ceil(new Date()/3600000);var s = document.getElementsByTagName('script')[0];s.parentNode.insertBefore(bdcs, s);})();</script>-->
            <ul class="layui-nav" style="background-color: rgba(0,0,0,0);" >
                
                

                <li  class="layui-nav-item"><a href="#"  style="color: #000;" onclick="goto()" title="QQ登入" class="iconfont icon-qq"></a>
                </li>
            </ul>


        </div>
        <div class="blank"></div>

        <nav>
            <div  class="navigation">
                <ul class="menu">
                    <li><a href="../index.html">网站首页</a></li>
                    <li><a href="#">技术文章</a>
                        <ul >
                            <li><a  href="../pages748a.html?cateId=1">Spring系列</a></li>
                            <li><a  href="../pages3c7b.html?cateId=6">前端开发</a></li>
                            <li><a  href="../pages4ead.html?cateId=7">软件安装</a></li>
                            <li><a  href="../pages8396.html?cateId=9">Java语法</a></li>
                            <li><a  href="../pagesff6a.html?cateId=10">资源下载</a></li>
                            <li><a  href="../pagesad9e.html?cateId=12">ORM框架</a></li>
                        </ul>
                    </li>

                    <li><a href="../note.html">我的日记</a> </li>
                    <li><a href="../msg.html">给我留言</a> </li>
                    <li><a href="../about.html">关于</a></li>
                </ul>
            </div>
        </nav>
        <SCRIPT type=text/javascript>
            // Navigation Menu
            $(function() {
                $(".menu ul").css({display: "none"}); // Opera Fix
                $(".menu li").hover(function(){
                    $(this).find('ul:first').css({visibility: "visible",display: "none"}).slideDown("normal");
                },function(){
                    $(this).find('ul:first').css({visibility: "hidden"});
                });
            });

            function  search() {
                var s=$('#keyboard').val();
                location.href = s === "" ? "/" : "/pages?searchStr=" + s;
            };
            function goto () {
                var url = window.location.href;
                var winObj = window.open('/api/qq?url=' + url, '_self');
            }
        </SCRIPT>

    </div>
</header>
    <div class="jztop"></div>

    <!--<bmy-article-page :alipay="params.alipay" :wechat="params.wechat_pay" :su="su">-->
        <!--<div th:insert ="frontend/fragment/articlepage :: article"  slot="article"></div>-->
        <!--<div  th:insert="frontend/fragment/comment :: comment" slot="post"></div>-->

        <!--<bmy-comment-list slot="comment" :comments="comments" :tips="params.comment_notice"-->
                          <!--:re="params.all_comment_open == 1 && article.commented"></bmy-comment-list>-->
       <!--<bmy-search slot="search"></bmy-search>-->
        <!--<div th:insert ="frontend/fragment/lot :: lot (${similarArticles},${'相似文章'})" slot="similar"></div>-->
        <!--<div th:insert ="frontend/fragment/lot :: lot (${lots},${'热度文章'})" slot="lot"></div>-->
    <!--</bmy-article-page>-->

    <div id="blog-body" class="layui-container">
       <div class="layui-row layui-col-space10">
           <div id="blog-info" class="layui-col-md12">
                <div class="layui-collapse layui-panel layui-article photos" >

                     <div  ><div class="layui-colla-item">
                    <h2 class="nh1"><span>您现在的位置是：<a href="../index.html" target="_blank">网站首页</a>>><a href="#" target="_blank">信息浏览</a>
                    </span><b>文章详情</b></h2>
                          <div class="layui-colla-content layui-show layui-article">
                                   <fieldset class="layui-elem-field layui-field-title layui-article-page-title">
                                       <legend class="center-to-head" align="center">SpringBoot之认识Spring Data Jpa</legend>
                                      </fieldset>
                                  <div class="layui-text layui-blog-body">
                                           <div class="layui-row">
                                                  <div class="layui-col-md6 layui-col-md-offset3 text-center blog-base-info">
                                                           <span><i class="fa fa-clock-o" ></i>2019-01-18 13:29 </span>
                                                           <span><i class="fa fa-user-o"></i> <span style="color: #FF5722;">许多年以后</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-renzhengkaobei"></use></svg></span>
                                                          <span><i class="fa fa-comment-o"></i></span>
                                                           <span><i class="fa fa-eye"></i> 1414</span>
                                                       </div>
                                               </div>
                                      <!-- Baidu Button BEGIN -->
                                           <!--<div id="bdshare" class="bdshare_t bds_tools get-codes-bdshare">-->
                                                  <!--<span class="bds_more">分享到：</span>-->
                                                  <!--<a class="bds_qzone"></a>-->
                                                  <!--<a class="bds_tsina"></a>-->
                                                  <!--<a class="bds_tqq"></a>-->
                                                  <!--<a class="bds_renren"></a>-->
                                                  <!--<a class="bds_t163"></a>-->
                                                  <!--<a class="shareCount"></a>-->
                                          <!--</div>-->
                                          <!--<script type="text/javascript" id="bdshare_js" data="type=tools&uid=6701193" ></script>-->
                                          <!--<script type="text/javascript" id="bdshell_js"></script>-->
                                          <!--<script type="text/javascript">-->
                                              <!--document.getElementById("bdshell_js").src = "https://bdimg.share.baidu.com/static/js/shell_v2.js?cdnversion=" + Math.ceil(new Date()/3600000)-->
                                          <!--</script>-->
                                      <!-- Baidu Button END -->
                                           <hr>
                                           <div class="content detail markdown-body editormd-preview-container editormd-preview-active"><pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code><span class="pun">很早之前就想写关于</span><span class="pln">JPA</span><span class="pun">的文章了，但是基于到时很赖，写不下来，那今天我们就慢慢的开始写，写多少就多少吧！</span></code></li></ol></pre><h2 id="h2--jpa"><a name="什么是JPA" class="reference-link"></a><span class="header-link octicon octicon-link"></span>什么是JPA</h2><pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code><span class="pln">JPA</span><span class="pun">是</span><span class="typ">Java</span><span class="pln"> </span><span class="typ">Persistence</span><span class="pln"> API</span><span class="pun">的简称，</span><span class="pln">JPA</span><span class="pun">是一个基于</span><span class="pln">O</span><span class="pun">/</span><span class="pln">R</span><span class="pun">映射的标准规范，因此任何声称符合</span><span class="pln"> JPA </span><span class="pun">标准的框架都遵循同样的架构，提供相同的访问</span><span class="pln">API</span><span class="pun">，这保证了基于</span><span class="pln">JPA</span><span class="pun">开发的企业应用能够经过少量的修改就能够在不同的</span><span class="pln">JPA</span><span class="pun">框架下运行。而</span><span class="pln">JPA</span><span class="pun">是需要</span><span class="typ">Provider</span><span class="pun">来实现其功能的，</span><span class="typ">Hibernate</span><span class="pun">就是</span><span class="pln">JPA </span><span class="typ">Provider</span><span class="pun">中很强的一个。</span></code></li><li class="L1"><code><span class="typ">Hibernate</span><span class="pln"> </span><span class="pun">从</span><span class="lit">3.2</span><span class="pun">开始，就开始兼容</span><span class="pln">JPA</span><span class="pun">。</span><span class="typ">Hibernate3</span><span class="pun">.</span><span class="lit">2</span><span class="pun">获得了</span><span class="typ">Sun</span><span class="pln"> TCK</span><span class="pun">的</span><span class="pln">JPA</span><span class="pun">(</span><span class="typ">Java</span><span class="pln"> </span><span class="typ">Persistence</span><span class="pln"> API</span><span class="pun">)</span><span class="pln"> </span><span class="pun">兼容认证，在</span><span class="typ">Hibernate</span><span class="pun">有自由、持久、游离三种，</span><span class="pln">JPA</span><span class="pun">里有</span><span class="kwd">new</span><span class="pun">，</span><span class="pln">managed</span><span class="pun">，</span><span class="pln">detached</span><span class="pun">，</span><span class="pln">removed</span><span class="pun">，明眼人一看就知道，这些状态都是一一对应的。再如</span><span class="pln">flush</span><span class="pun">方法，都是对应的，而其他的再如说</span><span class="typ">Query</span><span class="pln"> query </span><span class="pun">=</span><span class="pln"> manager</span><span class="pun">.</span><span class="pln">createQuery</span><span class="pun">(</span><span class="pln">sql</span><span class="pun">)，它在</span><span class="typ">Hibernate</span><span class="pun">里写法上是</span><span class="pln">session</span><span class="pun">，而在</span><span class="pln">JPA</span><span class="pun">中变成了</span><span class="pln">manager</span><span class="pun">，所以从</span><span class="typ">Hibernate</span><span class="pun">到</span><span class="pln">JPA</span><span class="pun">的代价应该是非常小的同样，</span><span class="pln">JDO</span><span class="pun">，也开始兼容</span><span class="pln">JPA</span><span class="pun">。在</span><span class="pln">ORM</span><span class="pun">的领域中，看来</span><span class="pln">JPA</span><span class="pun">已经是王道，规范就是规范。在各大厂商的支持下，</span><span class="pln">JPA</span><span class="pun">的使用开始变得广泛。</span></code></li></ol></pre><p><img src="../upfiles/img/2019-01-19/f1fb11d5-7c1f-44a2-974d-acec42e95a6d.jpg" alt=""></p>
<h2 id="h2--jpa"><a name="使用JPA" class="reference-link"></a><span class="header-link octicon octicon-link"></span>使用JPA</h2><p>创建实体类NBArticle</p>
<p>那么我们可以这样定义一个Dao层</p>
<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="lang-java"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">interface</span><span class="pln"> </span><span class="typ">ArticleRepository</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">JpaRepository</span><span class="pun">&lt;</span><span class="typ">NBArticle</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Long</span><span class="pun">&gt;,</span><span class="pln"> </span><span class="typ">JpaSpecificationExecutor</span><span class="pun">&lt;</span><span class="typ">NBArticle</span><span class="pun">&gt;</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code class="lang-java"></code></li><li class="L2"><code class="lang-java"><span class="pun">}</span></code></li></ol></pre>
<p>就短短的这几行代码，我们就有了以下这几个功能</p>
<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="lang-java"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">interface</span><span class="pln"> </span><span class="typ">JpaRepository</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">,</span><span class="pln"> ID</span><span class="pun">&gt;</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">PagingAndSortingRepository</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">,</span><span class="pln"> ID</span><span class="pun">&gt;,</span><span class="pln"> </span><span class="typ">QueryByExampleExecutor</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code class="lang-java"><span class="pln">    </span><span class="typ">List</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;</span><span class="pln"> findAll</span><span class="pun">();</span><span class="pln">  </span><span class="com">//查询所有</span></code></li><li class="L2"><code class="lang-java"></code></li><li class="L3"><code class="lang-java"><span class="pln">    </span><span class="typ">List</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;</span><span class="pln"> findAll</span><span class="pun">(</span><span class="typ">Sort</span><span class="pln"> var1</span><span class="pun">);</span><span class="pln"> </span></code></li><li class="L4"><code class="lang-java"></code></li><li class="L5"><code class="lang-java"><span class="pln">    </span><span class="typ">List</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;</span><span class="pln"> findAllById</span><span class="pun">(</span><span class="typ">Iterable</span><span class="pun">&lt;</span><span class="pln">ID</span><span class="pun">&gt;</span><span class="pln"> var1</span><span class="pun">);</span></code></li><li class="L6"><code class="lang-java"></code></li><li class="L7"><code class="lang-java"><span class="pln">    </span><span class="pun">&lt;</span><span class="pln">S </span><span class="kwd">extends</span><span class="pln"> T</span><span class="pun">&gt;</span><span class="pln"> </span><span class="typ">List</span><span class="pun">&lt;</span><span class="pln">S</span><span class="pun">&gt;</span><span class="pln"> saveAll</span><span class="pun">(</span><span class="typ">Iterable</span><span class="pun">&lt;</span><span class="pln">S</span><span class="pun">&gt;</span><span class="pln"> var1</span><span class="pun">);</span></code></li><li class="L8"><code class="lang-java"></code></li><li class="L9"><code class="lang-java"><span class="pln">    </span><span class="kwd">void</span><span class="pln"> flush</span><span class="pun">();</span></code></li><li class="L0"><code class="lang-java"></code></li><li class="L1"><code class="lang-java"><span class="pln">    </span><span class="pun">&lt;</span><span class="pln">S </span><span class="kwd">extends</span><span class="pln"> T</span><span class="pun">&gt;</span><span class="pln"> S saveAndFlush</span><span class="pun">(</span><span class="pln">S var1</span><span class="pun">);</span></code></li><li class="L2"><code class="lang-java"></code></li><li class="L3"><code class="lang-java"><span class="pln">    </span><span class="kwd">void</span><span class="pln"> deleteInBatch</span><span class="pun">(</span><span class="typ">Iterable</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;</span><span class="pln"> var1</span><span class="pun">);</span></code></li><li class="L4"><code class="lang-java"></code></li><li class="L5"><code class="lang-java"><span class="pln">    </span><span class="kwd">void</span><span class="pln"> deleteAllInBatch</span><span class="pun">();</span></code></li><li class="L6"><code class="lang-java"></code></li><li class="L7"><code class="lang-java"><span class="pln">    T getOne</span><span class="pun">(</span><span class="pln">ID var1</span><span class="pun">);</span></code></li><li class="L8"><code class="lang-java"></code></li><li class="L9"><code class="lang-java"><span class="pln">    </span><span class="pun">&lt;</span><span class="pln">S </span><span class="kwd">extends</span><span class="pln"> T</span><span class="pun">&gt;</span><span class="pln"> </span><span class="typ">List</span><span class="pun">&lt;</span><span class="pln">S</span><span class="pun">&gt;</span><span class="pln"> findAll</span><span class="pun">(</span><span class="typ">Example</span><span class="pun">&lt;</span><span class="pln">S</span><span class="pun">&gt;</span><span class="pln"> var1</span><span class="pun">);</span></code></li><li class="L0"><code class="lang-java"></code></li><li class="L1"><code class="lang-java"><span class="pln">    </span><span class="pun">&lt;</span><span class="pln">S </span><span class="kwd">extends</span><span class="pln"> T</span><span class="pun">&gt;</span><span class="pln"> </span><span class="typ">List</span><span class="pun">&lt;</span><span class="pln">S</span><span class="pun">&gt;</span><span class="pln"> findAll</span><span class="pun">(</span><span class="typ">Example</span><span class="pun">&lt;</span><span class="pln">S</span><span class="pun">&gt;</span><span class="pln"> var1</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Sort</span><span class="pln"> var2</span><span class="pun">);</span></code></li><li class="L2"><code class="lang-java"><span class="pun">}</span></code></li></ol></pre>
<p>看是不是很方便啊，如果以上这些方法还不能满足你的要求，那么我们可以自己定义方法啊</p>
<h3 id="h3-u67E5u8BE2u603Bu6570"><a name="查询总数" class="reference-link"></a><span class="header-link octicon octicon-link"></span>查询总数</h3><pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="lang-java"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">interface</span><span class="pln"> </span><span class="typ">ArticleRepository</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">JpaRepository</span><span class="pun">&lt;</span><span class="typ">NBArticle</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Long</span><span class="pun">&gt;,</span><span class="pln"> </span><span class="typ">JpaSpecificationExecutor</span><span class="pun">&lt;</span><span class="typ">NBArticle</span><span class="pun">&gt;</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code class="lang-java"></code></li><li class="L2"><code class="lang-java"><span class="pln">    </span><span class="com">/**</span></code></li><li class="L3"><code class="lang-java"><span class="com">     * 查询满足UrlSequence相关的总数</span></code></li><li class="L4"><code class="lang-java"><span class="com">     *</span></code></li><li class="L5"><code class="lang-java"><span class="com">     * @param urlSequence</span></code></li><li class="L6"><code class="lang-java"><span class="com">     * @return</span></code></li><li class="L7"><code class="lang-java"><span class="com">     */</span></code></li><li class="L8"><code class="lang-java"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> countByUrlSequence</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> urlSequence</span><span class="pun">);</span></code></li><li class="L9"><code class="lang-java"></code></li><li class="L0"><code class="lang-java"><span class="pln">        </span><span class="com">/**</span></code></li><li class="L1"><code class="lang-java"><span class="com">     * 根据满足UrlSequence和draft变量计算文章数量</span></code></li><li class="L2"><code class="lang-java"><span class="com">     *</span></code></li><li class="L3"><code class="lang-java"><span class="com">     * @param draft</span></code></li><li class="L4"><code class="lang-java"><span class="com">     * @return</span></code></li><li class="L5"><code class="lang-java"><span class="com">     */</span></code></li><li class="L6"><code class="lang-java"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> countByUrlSequenceAndDraft</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> urlSequence</span><span class="pun">，</span><span class="kwd">boolean</span><span class="pln"> draft</span><span class="pun">);</span></code></li><li class="L7"><code class="lang-java"></code></li><li class="L8"><code class="lang-java"><span class="pun">}</span></code></li></ol></pre>
<h3 id="h3-u67E5u627Eu5BF9u8C61"><a name="查找对象" class="reference-link"></a><span class="header-link octicon octicon-link"></span>查找对象</h3><pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="lang-java"><span class="com">//根据文章自定义链接查找文章对象</span></code></li><li class="L1"><code class="lang-java"><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">NBArticle</span><span class="pun">&gt;</span><span class="pln"> findNBArticleByUrlSequence</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> urlSeq</span><span class="pun">);</span></code></li><li class="L2"><code class="lang-java"></code></li><li class="L3"><code class="lang-java"><span class="com">//通过自定义链接like查询</span></code></li><li class="L4"><code class="lang-java"><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">NBArticle</span><span class="pun">&gt;</span><span class="pln"> findNBArticleByUrlSequenceLike</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> urlSeq</span><span class="pun">);</span></code></li><li class="L5"><code class="lang-java"></code></li><li class="L6"><code class="lang-java"><span class="com">//</span></code></li><li class="L7"><code class="lang-java"><span class="com">//通过自定义链接和dreaft查询</span></code></li><li class="L8"><code class="lang-java"><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">NBArticle</span><span class="pun">&gt;</span><span class="pln"> findNBArticleByUrlSequenceAndDraft</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> urlSeq</span><span class="pun">,</span><span class="kwd">boolean</span><span class="pln"> draft</span><span class="pun">);</span></code></li></ol></pre>
<h3 id="h3-u5173u952Eu5B57"><a name="关键字" class="reference-link"></a><span class="header-link octicon octicon-link"></span>关键字</h3><p>从上面的代码我们可以看出我们可以用一些关键字代表一些语句，表格如下</p>
<table>
<thead>
<tr>
<th>关键字</th>
<th>示例</th>
<th>JPQL 同等功能</th>
</tr>
</thead>
<tbody>
<tr>
<td>And</td>
<td>findByLastnameAndFirstname</td>
<td>… where x.lastname = ?1 and x.firstname = ?2</td>
</tr>
<tr>
<td>Or</td>
<td>findByLastnameOrFirstname</td>
<td>… where x.lastname = ?1 or x.firstname = ?2</td>
</tr>
<tr>
<td>Is,Equals</td>
<td>findByFirstname,findByFirstnameIs,findByFirstnameEquals</td>
<td>… where x.firstname = 1?</td>
</tr>
<tr>
<td>Between</td>
<td>findByStartDateBetween</td>
<td>… where x.startDate between 1? and ?2</td>
</tr>
<tr>
<td>LessThan</td>
<td>findByAgeLessThan</td>
<td>… where x.age &lt; ?1</td>
</tr>
<tr>
<td>LessThanEqual</td>
<td>findByAgeLessThanEqual</td>
<td>… where x.age &lt;= ?1</td>
</tr>
<tr>
<td>GreaterThan</td>
<td>findByAgeGreaterThan</td>
<td>… where x.age &gt; ?1</td>
</tr>
<tr>
<td>GreaterThanEqual</td>
<td>findByAgeGreaterThanEqual</td>
<td>… where x.age &gt;= ?1</td>
</tr>
<tr>
<td>After</td>
<td>findByStartDateAfter</td>
<td>… where x.startDate &gt; ?1</td>
</tr>
<tr>
<td>Before</td>
<td>findByStartDateBefore</td>
<td>… where x.startDate &lt; ?1</td>
</tr>
<tr>
<td>IsNull</td>
<td>findByAgeIsNull</td>
<td>… where x.age is null</td>
</tr>
<tr>
<td>IsNotNull,NotNull</td>
<td>findByAge(Is)NotNull</td>
<td>… where x.age not null</td>
</tr>
<tr>
<td>Like</td>
<td>findByFirstnameLike</td>
<td>… where x.firstname like ?1</td>
</tr>
<tr>
<td>NotLike</td>
<td>findByFirstnameNotLike</td>
<td>… where x.firstname not like ?1</td>
</tr>
<tr>
<td>StartingWith</td>
<td>findByFirstnameStartingWith</td>
<td>… where x.firstname like ?1 (parameter bound with appended %)</td>
</tr>
<tr>
<td>EndingWith</td>
<td>findByFirstnameEndingWith</td>
<td>… where x.firstname like ?1 (parameter bound with prepended %)</td>
</tr>
<tr>
<td>Containing</td>
<td>findByFirstnameContaining</td>
<td>… where x.firstname like ?1 (parameter bound wrapped in %)</td>
</tr>
<tr>
<td>OrderBy</td>
<td>findByAgeOrderByLastnameDesc</td>
<td>… where x.age = ?1 order by x.lastname desc</td>
</tr>
<tr>
<td>Not</td>
<td>findByLastnameNot</td>
<td>… where x.lastname &lt;&gt; ?1</td>
</tr>
<tr>
<td>In</td>
<td>findByAgeIn(Collection&lt;Age&gt; ages)</td>
<td>… where x.age in ?1</td>
</tr>
<tr>
<td>NotIn</td>
<td>findByAgeNotIn(Collection&lt;Age&gt; age)</td>
<td>… where x.age not in ?1</td>
</tr>
<tr>
<td>True</td>
<td>findByActiveTrue()</td>
<td>… where x.active = true</td>
</tr>
<tr>
<td>False</td>
<td>findByActiveFalse()</td>
<td>… where x.active = false</td>
</tr>
<tr>
<td>IgnoreCase</td>
<td>findByFirstnameIgnoreCase</td>
<td>… where UPPER(x.firstame) = UPPER(?1)</td>
</tr>
</tbody>
</table>
<h3 id="h3--top-frist-"><a name="限制数量查询（top或者frist）" class="reference-link"></a><span class="header-link octicon octicon-link"></span>限制数量查询（top或者frist）</h3><p>那么有时我们只要查询几条,如我只要查询5条文章</p>
<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="lang-java"><span class="com">//查询满足UrlSequence的5条记录（First）</span></code></li><li class="L1"><code class="lang-java"><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">NBArticle</span><span class="pun">&gt;</span><span class="pln"> findFirst5ByUrlSequence</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> urlSeq</span><span class="pun">);</span></code></li><li class="L2"><code class="lang-java"></code></li><li class="L3"><code class="lang-java"><span class="com">//top</span></code></li><li class="L4"><code class="lang-java"><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">NBArticle</span><span class="pun">&gt;</span><span class="pln"> findTop5ByUrlSequence</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> urlSeq</span><span class="pun">);</span></code></li></ol></pre>
<h3 id="h3-sql-"><a name="Sql语句操作" class="reference-link"></a><span class="header-link octicon octicon-link"></span>Sql语句操作</h3><p>有人说，我习惯用SQL查询，当然，这里也可以用sql，用到注解<a href="https://github.com/Query" title="@Query" class="at-link">@Query</a>,在这个注解里有个参数nativeQuery，为true是，表示是原生的操作表，如果为false，则操作的是实体类。表名是nb_article</p>
<h4 id="h4-u67E5u8BE2"><a name="查询" class="reference-link"></a><span class="header-link octicon octicon-link"></span>查询</h4><pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="lang-java"><span class="pln">   </span><span class="com">/**</span></code></li><li class="L1"><code class="lang-java"><span class="com">     * 查找出最大的 top 值</span></code></li><li class="L2"><code class="lang-java"><span class="com">     *</span></code></li><li class="L3"><code class="lang-java"><span class="com">     * @return</span></code></li><li class="L4"><code class="lang-java"><span class="com">     */</span></code></li><li class="L5"><code class="lang-java"><span class="pln">    </span><span class="lit">@Query</span><span class="pun">(</span><span class="pln">nativeQuery </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">,</span><span class="pln"> value </span><span class="pun">=</span><span class="pln"> </span><span class="str">"SELECT MAX(top)FROM nb_article "</span><span class="pun">)</span></code></li><li class="L6"><code class="lang-java"><span class="pln">    </span><span class="kwd">int</span><span class="pln"> findMaxTop</span><span class="pun">();</span></code></li><li class="L7"><code class="lang-java"></code></li><li class="L8"><code class="lang-java"><span class="pln">    </span><span class="com">/**</span></code></li><li class="L9"><code class="lang-java"><span class="com">     * 查找相似的文章  参数是一一对应的</span></code></li><li class="L0"><code class="lang-java"><span class="com">     *</span></code></li><li class="L1"><code class="lang-java"><span class="com">     * @param cateId</span></code></li><li class="L2"><code class="lang-java"><span class="com">     * @param limit</span></code></li><li class="L3"><code class="lang-java"><span class="com">     * @return</span></code></li><li class="L4"><code class="lang-java"><span class="com">     */</span></code></li><li class="L5"><code class="lang-java"><span class="pln">    </span><span class="lit">@Query</span><span class="pun">(</span><span class="pln">nativeQuery </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">,</span><span class="pln"> value </span><span class="pun">=</span><span class="pln"> </span><span class="str">"SELECT * FROM nb_article WHERE cate_id = ?1 ORDER BY rand() LIMIT ?2"</span><span class="pun">)</span></code></li><li class="L6"><code class="lang-java"><span class="pln">    </span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">NBArticle</span><span class="pun">&gt;</span><span class="pln"> findSimilarArticles</span><span class="pun">(</span><span class="kwd">long</span><span class="pln"> cateId</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> limit</span><span class="pun">);</span></code></li></ol></pre>
<h4 id="h4-update"><a name="update" class="reference-link"></a><span class="header-link octicon octicon-link"></span>update</h4><p>更新时，我们还要在加个注解，就是<a href="https://github.com/Modifying" title="@Modifying" class="at-link">@Modifying</a>   我们还可以加个事务的注解<a href="https://github.com/Transactional" title="@Transactional" class="at-link">@Transactional</a>(rollbackOn = Exception.class)</p>
<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="lang-java"><span class="pln">  </span><span class="com">/**</span></code></li><li class="L1"><code class="lang-java"><span class="com">     * 更新 appreciable 状态 默认不是原生的</span></code></li><li class="L2"><code class="lang-java"><span class="com">     *</span></code></li><li class="L3"><code class="lang-java"><span class="com">     * @param appreciable</span></code></li><li class="L4"><code class="lang-java"><span class="com">     * @param id</span></code></li><li class="L5"><code class="lang-java"><span class="com">     * @return</span></code></li><li class="L6"><code class="lang-java"><span class="com">     */</span></code></li><li class="L7"><code class="lang-java"><span class="pln">    </span><span class="lit">@Modifying</span></code></li><li class="L8"><code class="lang-java"><span class="pln">    </span><span class="lit">@Query</span><span class="pun">(</span><span class="str">"update NBArticle a set a.appreciable = ?1 where a.id = ?2"</span><span class="pun">)</span></code></li><li class="L9"><code class="lang-java"><span class="pln">    </span><span class="lit">@Transactional</span><span class="pun">(</span><span class="pln">rollbackOn </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Exception</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">)</span></code></li><li class="L0"><code class="lang-java"><span class="pln">    </span><span class="kwd">int</span><span class="pln"> updateAppreciableById</span><span class="pun">(</span><span class="kwd">boolean</span><span class="pln"> appreciable</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> id</span><span class="pun">);</span></code></li><li class="L1"><code class="lang-java"></code></li><li class="L2"><code class="lang-java"><span class="com">//原生的</span></code></li><li class="L3"><code class="lang-java"><span class="pln">    </span><span class="com">/**</span></code></li><li class="L4"><code class="lang-java"><span class="com">     * 更新文章点赞数</span></code></li><li class="L5"><code class="lang-java"><span class="com">     *</span></code></li><li class="L6"><code class="lang-java"><span class="com">     * @param articleId</span></code></li><li class="L7"><code class="lang-java"><span class="com">     * @return</span></code></li><li class="L8"><code class="lang-java"><span class="com">     * @throws Exception</span></code></li><li class="L9"><code class="lang-java"><span class="com">     */</span></code></li><li class="L0"><code class="lang-java"><span class="pln">    </span><span class="lit">@Query</span><span class="pun">(</span><span class="pln">nativeQuery </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">,</span><span class="pln"> value </span><span class="pun">=</span><span class="pln"> </span><span class="str">"UPDATE nb_article SET approve_cnt = approve_cnt + 1 WHERE id = ?1"</span><span class="pun">)</span></code></li><li class="L1"><code class="lang-java"><span class="pln">    </span><span class="lit">@Modifying</span></code></li><li class="L2"><code class="lang-java"><span class="pln">    </span><span class="lit">@Transactional</span><span class="pun">(</span><span class="pln">rollbackOn </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Exception</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">)</span></code></li><li class="L3"><code class="lang-java"><span class="pln">    </span><span class="kwd">int</span><span class="pln"> updateApproveCntById</span><span class="pun">(</span><span class="kwd">long</span><span class="pln"> articleId</span><span class="pun">);</span></code></li></ol></pre>
<h3 id="h3-examplematcher-"><a name="ExampleMatcher实例查询" class="reference-link"></a><span class="header-link octicon octicon-link"></span>ExampleMatcher实例查询</h3><p>这个是个好东西，对应那些对sql语句不好的程序员，可以用这个查询</p>
<ul>
<li><p>实体对象：在ORM框架中与Table对应的域对象，一个对象代表数据库表中的一条记录，如上例中User对象，对应user表。在构建查询条件时，一个实体对象代表的是查询条件中的“数值”部分。如：要查询姓“X”的客户，实体对象只需要存储条件值“X”。</p>
</li><li><p>匹配器：ExampleMatcher对象，它是匹配“实体对象”的，表示了如何使用“实体对象”中的“值”进行查询，它代表的是“查询方式”，解释了如何去查的问题。如：要查询姓“X”的客户，即姓名以“X”开头的客户，该对象就表示了“以某某开头的”这个查询方式，如上例中:withMatcher(“userName”, GenericPropertyMatchers.startsWith())</p>
</li><li><p>实例：即Example对象，代表的是完整的查询条件。由实体对象（查询条件值）和匹配器（查询方式）共同创建。最终根据实例来findAll即可</p>
</li></ul>
<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="lang-java"><span class="pln"> </span><span class="typ">NBArticle</span><span class="pln"> prob </span><span class="pun">=</span><span class="pln"> </span><span class="typ">NBArticle</span><span class="pun">.</span><span class="pln">builder</span><span class="pun">().</span><span class="pln">textContent</span><span class="pun">(</span><span class="pln">searchStr</span><span class="pun">)</span></code></li><li class="L1"><code class="lang-java"><span class="pln">                    </span><span class="pun">.</span><span class="pln">title</span><span class="pun">(</span><span class="pln">searchStr</span><span class="pun">).</span><span class="pln">build</span><span class="pun">();</span><span class="pln">  </span><span class="com">//创建查询实体</span></code></li><li class="L2"><code class="lang-java"><span class="pln">            </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">articleQueryBO</span><span class="pun">.</span><span class="pln">getCateId</span><span class="pun">()</span><span class="pln"> </span><span class="pun">!=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L3"><code class="lang-java"><span class="pln">                prob</span><span class="pun">.</span><span class="pln">setCateId</span><span class="pun">(</span><span class="pln">articleQueryBO</span><span class="pun">.</span><span class="pln">getCateId</span><span class="pun">());</span></code></li><li class="L4"><code class="lang-java"><span class="pln">            </span><span class="pun">}</span></code></li><li class="L5"><code class="lang-java"><span class="pln">            prob</span><span class="pun">.</span><span class="pln">setDraft</span><span class="pun">(</span><span class="kwd">false</span><span class="pun">);</span><span class="pln">  </span><span class="com">//查询实体  就是我们要查询的条件</span></code></li><li class="L6"><code class="lang-java"><span class="pln">            </span><span class="typ">ExampleMatcher</span><span class="pln"> matcher </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ExampleMatcher</span><span class="pun">.</span><span class="pln">matching</span><span class="pun">()</span></code></li><li class="L7"><code class="lang-java"><span class="pln">                   </span><span class="pun">.</span><span class="pln">withMatcher</span><span class="pun">(</span><span class="str">"title"</span><span class="pun">,</span><span class="pln"> </span><span class="typ">ExampleMatcher</span><span class="pun">.</span><span class="typ">GenericPropertyMatcher</span><span class="pun">::</span><span class="pln">contains</span><span class="pun">)</span></code></li><li class="L8"><code class="lang-java"><span class="pln">                   </span><span class="pun">.</span><span class="pln">withMatcher</span><span class="pun">(</span><span class="str">"textContent"</span><span class="pun">,</span><span class="pln"> </span><span class="typ">ExampleMatcher</span><span class="pun">.</span><span class="typ">GenericPropertyMatcher</span><span class="pun">::</span><span class="pln">contains</span><span class="pun">)</span><span class="com">//包含，就是like</span></code></li><li class="L9"><code class="lang-java"><span class="pln">                    </span><span class="pun">.</span><span class="pln">withIgnorePaths</span><span class="pun">(</span><span class="str">"post"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"modify"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"view"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"approveCnt"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"commented"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"mdContent"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"appreciable"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"top"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"draft"</span><span class="pun">)</span><span class="com">//忽略属性列表，忽略的属性不参与查询过滤。</span></code></li><li class="L0"><code class="lang-java"><span class="pln">                    </span><span class="pun">.</span><span class="pln">withIgnoreNullValues</span><span class="pun">();</span><span class="pln">  </span><span class="com">//匹配器</span></code></li><li class="L1"><code class="lang-java"><span class="pln">            </span><span class="typ">Example</span><span class="pun">&lt;</span><span class="typ">NBArticle</span><span class="pun">&gt;</span><span class="pln"> articleExample </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Example</span><span class="pun">.</span><span class="pln">of</span><span class="pun">(</span><span class="pln">prob</span><span class="pun">,</span><span class="pln"> matcher</span><span class="pun">);</span><span class="com">//实例</span></code></li><li class="L2"><code class="lang-java"><span class="pln">            </span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">NBArticle</span><span class="pun">&gt;</span><span class="pln"> pages </span><span class="pun">=</span><span class="pln"> articleRepository</span><span class="pun">.</span><span class="pln">findAll</span><span class="pun">(</span><span class="pln">articleExample</span><span class="pun">);</span><span class="pln">  </span></code></li><li class="L3"><code class="lang-java"><span class="pln">            </span><span class="com">//Page&lt;NBArticle&gt; page = articleRepository.findAll(articleExample, pageable);分页查询</span></code></li></ol></pre>
<h3 id="h3-u5206u9875u67E5u8BE2"><a name="分页查询" class="reference-link"></a><span class="header-link octicon octicon-link"></span>分页查询</h3><p>在分页查询中，我们要extends接口 JpaSpecificationExecutor&lt;NBAbout&gt;，这样我们就有以下的功能</p>
<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="lang-java"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">interface</span><span class="pln"> </span><span class="typ">JpaSpecificationExecutor</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code class="lang-java"><span class="pln">    </span><span class="typ">Optional</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;</span><span class="pln"> findOne</span><span class="pun">(</span><span class="lit">@Nullable</span><span class="pln"> </span><span class="typ">Specification</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;</span><span class="pln"> var1</span><span class="pun">);</span></code></li><li class="L2"><code class="lang-java"></code></li><li class="L3"><code class="lang-java"><span class="pln">    </span><span class="typ">List</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;</span><span class="pln"> findAll</span><span class="pun">(</span><span class="lit">@Nullable</span><span class="pln"> </span><span class="typ">Specification</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;</span><span class="pln"> var1</span><span class="pun">);</span></code></li><li class="L4"><code class="lang-java"></code></li><li class="L5"><code class="lang-java"><span class="pln">    </span><span class="typ">Page</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;</span><span class="pln"> findAll</span><span class="pun">(</span><span class="lit">@Nullable</span><span class="pln"> </span><span class="typ">Specification</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;</span><span class="pln"> var1</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Pageable</span><span class="pln"> var2</span><span class="pun">);</span></code></li><li class="L6"><code class="lang-java"></code></li><li class="L7"><code class="lang-java"><span class="pln">    </span><span class="typ">List</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;</span><span class="pln"> findAll</span><span class="pun">(</span><span class="lit">@Nullable</span><span class="pln"> </span><span class="typ">Specification</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;</span><span class="pln"> var1</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Sort</span><span class="pln"> var2</span><span class="pun">);</span></code></li><li class="L8"><code class="lang-java"></code></li><li class="L9"><code class="lang-java"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> count</span><span class="pun">(</span><span class="lit">@Nullable</span><span class="pln"> </span><span class="typ">Specification</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;</span><span class="pln"> var1</span><span class="pun">);</span></code></li><li class="L0"><code class="lang-java"><span class="pun">}</span></code></li></ol></pre>
<h4 id="h4-page-"><a name="page对象" class="reference-link"></a><span class="header-link octicon octicon-link"></span>page对象</h4><pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="lang-java"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">interface</span><span class="pln"> </span><span class="typ">Page</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">Slice</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code class="lang-java"><span class="pln">    </span><span class="kwd">static</span><span class="pln"> </span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;</span><span class="pln"> </span><span class="typ">Page</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;</span><span class="pln"> empty</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2"><code class="lang-java"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> empty</span><span class="pun">(</span><span class="typ">Pageable</span><span class="pun">.</span><span class="pln">unpaged</span><span class="pun">());</span></code></li><li class="L3"><code class="lang-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L4"><code class="lang-java"></code></li><li class="L5"><code class="lang-java"><span class="pln">    </span><span class="kwd">static</span><span class="pln"> </span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;</span><span class="pln"> </span><span class="typ">Page</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;</span><span class="pln"> empty</span><span class="pun">(</span><span class="typ">Pageable</span><span class="pln"> pageable</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6"><code class="lang-java"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">PageImpl</span><span class="pun">(</span><span class="typ">Collections</span><span class="pun">.</span><span class="pln">emptyList</span><span class="pun">(),</span><span class="pln"> pageable</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0L</span><span class="pun">);</span></code></li><li class="L7"><code class="lang-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L8"><code class="lang-java"></code></li><li class="L9"><code class="lang-java"><span class="pln">    </span><span class="kwd">int</span><span class="pln"> getTotalPages</span><span class="pun">();</span><span class="pln"> </span><span class="com">//总页数</span></code></li><li class="L0"><code class="lang-java"></code></li><li class="L1"><code class="lang-java"><span class="pln">    </span><span class="kwd">long</span><span class="pln"> getTotalElements</span><span class="pun">();</span><span class="pln">  </span><span class="com">//元素的总数</span></code></li><li class="L2"><code class="lang-java"></code></li><li class="L3"><code class="lang-java"><span class="pln">    </span><span class="pun">&lt;</span><span class="pln">U</span><span class="pun">&gt;</span><span class="pln"> </span><span class="typ">Page</span><span class="pun">&lt;</span><span class="pln">U</span><span class="pun">&gt;</span><span class="pln"> map</span><span class="pun">(</span><span class="typ">Function</span><span class="pun">&lt;?</span><span class="pln"> </span><span class="kwd">super</span><span class="pln"> T</span><span class="pun">,</span><span class="pln"> </span><span class="pun">?</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> U</span><span class="pun">&gt;</span><span class="pln"> var1</span><span class="pun">);</span></code></li><li class="L4"><code class="lang-java"><span class="pun">}</span></code></li></ol></pre>
<p>还有其他方法</p>
<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="lang-java"></code></li><li class="L1"><code class="lang-java"><span class="com">/**</span></code></li><li class="L2"><code class="lang-java"><span class="com"> * 分页信息 第一页从1开始</span></code></li><li class="L3"><code class="lang-java"><span class="com"> * </span></code></li><li class="L4"><code class="lang-java"><span class="com"> */</span></code></li><li class="L5"><code class="lang-java"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Page</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">Serializable</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Iterable</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6"><code class="lang-java"></code></li><li class="L7"><code class="lang-java"><span class="pln">    </span><span class="kwd">protected</span><span class="pln"> </span><span class="typ">List</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;</span><span class="pln"> result</span><span class="pun">;</span></code></li><li class="L8"><code class="lang-java"></code></li><li class="L9"><code class="lang-java"><span class="pln">    </span><span class="kwd">protected</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> pageSize</span><span class="pun">=</span><span class="lit">10</span><span class="pun">;</span></code></li><li class="L0"><code class="lang-java"></code></li><li class="L1"><code class="lang-java"><span class="pln">    </span><span class="kwd">protected</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> pageNumber</span><span class="pun">=</span><span class="lit">1</span><span class="pun">;</span></code></li><li class="L2"><code class="lang-java"></code></li><li class="L3"><code class="lang-java"><span class="pln">    </span><span class="com">/**</span></code></li><li class="L4"><code class="lang-java"><span class="com">     * 总记录数</span></code></li><li class="L5"><code class="lang-java"><span class="com">     */</span></code></li><li class="L6"><code class="lang-java"><span class="pln">    </span><span class="kwd">protected</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> totalCount </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></code></li><li class="L7"><code class="lang-java"></code></li><li class="L8"><code class="lang-java"><span class="pln">    </span><span class="kwd">protected</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> isPagination </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span></code></li><li class="L9"><code class="lang-java"></code></li><li class="L0"><code class="lang-java"><span class="pln">    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> pageNum</span><span class="pun">;</span><span class="com">//总页数</span></code></li><li class="L1"><code class="lang-java"></code></li><li class="L2"><code class="lang-java"><span class="pln">    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> startIndex</span><span class="pun">;</span></code></li><li class="L3"><code class="lang-java"></code></li><li class="L4"><code class="lang-java"><span class="pln">    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> limit</span><span class="pun">;</span></code></li><li class="L5"><code class="lang-java"></code></li><li class="L6"><code class="lang-java"><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> getPageNum</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7"><code class="lang-java"><span class="pln">        </span><span class="kwd">int</span><span class="pln">  totalPageNum </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pun">)</span><span class="pln"> </span><span class="pun">((</span><span class="pln">totalCount </span><span class="pun">%</span><span class="pln"> pageSize </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">?</span><span class="pln"> totalCount </span><span class="pun">/</span><span class="pln"> pageSize </span><span class="pun">:</span><span class="pln"> totalCount </span><span class="pun">/</span><span class="pln"> pageSize </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">);</span></code></li><li class="L8"><code class="lang-java"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> totalPageNum</span><span class="pun">;</span></code></li><li class="L9"><code class="lang-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L0"><code class="lang-java"></code></li><li class="L1"><code class="lang-java"><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Page</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2"><code class="lang-java"></code></li><li class="L3"><code class="lang-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L4"><code class="lang-java"></code></li><li class="L5"><code class="lang-java"><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Page</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> pageNumber</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> pageSize</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> totalCount</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6"><code class="lang-java"><span class="pln">        </span><span class="kwd">this</span><span class="pun">(</span><span class="pln">pageNumber</span><span class="pun">,</span><span class="pln"> pageSize</span><span class="pun">,</span><span class="pln"> totalCount</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ArrayList</span><span class="pun">(</span><span class="lit">0</span><span class="pun">));</span></code></li><li class="L7"><code class="lang-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L8"><code class="lang-java"></code></li><li class="L9"><code class="lang-java"><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Page</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> pageNumber</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> pageSize</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> totalCount</span><span class="pun">,</span><span class="pln"> </span><span class="typ">List</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;</span><span class="pln"> result</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L0"><code class="lang-java"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pageSize </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></code></li><li class="L1"><code class="lang-java"><span class="pln">            </span><span class="kwd">throw</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">IllegalArgumentException</span><span class="pun">(</span><span class="str">"[pageSize] must great than zero"</span><span class="pun">);</span></code></li><li class="L2"><code class="lang-java"><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">pageSize </span><span class="pun">=</span><span class="pln"> pageSize</span><span class="pun">;</span></code></li><li class="L3"><code class="lang-java"><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">pageNumber </span><span class="pun">=</span><span class="pln"> </span><span class="typ">PageUtils</span><span class="pun">.</span><span class="pln">computePageNumber</span><span class="pun">(</span><span class="pln">pageNumber</span><span class="pun">,</span><span class="pln"> pageSize</span><span class="pun">,</span><span class="pln"> totalCount</span><span class="pun">);</span></code></li><li class="L4"><code class="lang-java"><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">totalCount </span><span class="pun">=</span><span class="pln"> totalCount</span><span class="pun">;</span></code></li><li class="L5"><code class="lang-java"><span class="pln">        setResult</span><span class="pun">(</span><span class="pln">result</span><span class="pun">);</span></code></li><li class="L6"><code class="lang-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L7"><code class="lang-java"></code></li><li class="L8"><code class="lang-java"><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> setResult</span><span class="pun">(</span><span class="typ">List</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;</span><span class="pln"> elements</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L9"><code class="lang-java"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">elements </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">)</span></code></li><li class="L0"><code class="lang-java"><span class="pln">            </span><span class="kwd">throw</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">IllegalArgumentException</span><span class="pun">(</span><span class="str">"'result' must be not null"</span><span class="pun">);</span></code></li><li class="L1"><code class="lang-java"><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">result </span><span class="pun">=</span><span class="pln"> elements</span><span class="pun">;</span></code></li><li class="L2"><code class="lang-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L3"><code class="lang-java"></code></li><li class="L4"><code class="lang-java"><span class="pln">    </span><span class="com">/**</span></code></li><li class="L5"><code class="lang-java"><span class="com">     * 当前页包含的数据</span></code></li><li class="L6"><code class="lang-java"><span class="com">     * </span></code></li><li class="L7"><code class="lang-java"><span class="com">     * @return 当前页数据源</span></code></li><li class="L8"><code class="lang-java"><span class="com">     */</span></code></li><li class="L9"><code class="lang-java"><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">List</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;</span><span class="pln"> getResult</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L0"><code class="lang-java"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> result</span><span class="pun">;</span></code></li><li class="L1"><code class="lang-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L2"><code class="lang-java"></code></li><li class="L3"><code class="lang-java"><span class="pln">    </span><span class="com">/**</span></code></li><li class="L4"><code class="lang-java"><span class="com">     * 是否是首页（第一页），第一页页码为1</span></code></li><li class="L5"><code class="lang-java"><span class="com">     * </span></code></li><li class="L6"><code class="lang-java"><span class="com">     * @return 首页标识</span></code></li><li class="L7"><code class="lang-java"><span class="com">     */</span></code></li><li class="L8"><code class="lang-java"><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> isFirstPage</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L9"><code class="lang-java"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> getThisPageNumber</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></code></li><li class="L0"><code class="lang-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L1"><code class="lang-java"></code></li><li class="L2"><code class="lang-java"><span class="pln">    </span><span class="com">/**</span></code></li><li class="L3"><code class="lang-java"><span class="com">     * 是否是最后一页</span></code></li><li class="L4"><code class="lang-java"><span class="com">     * </span></code></li><li class="L5"><code class="lang-java"><span class="com">     * @return 末页标识</span></code></li><li class="L6"><code class="lang-java"><span class="com">     */</span></code></li><li class="L7"><code class="lang-java"><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> isLastPage</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L8"><code class="lang-java"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> getThisPageNumber</span><span class="pun">()</span><span class="pln"> </span><span class="pun">&gt;=</span><span class="pln"> getLastPageNumber</span><span class="pun">();</span></code></li><li class="L9"><code class="lang-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L0"><code class="lang-java"></code></li><li class="L1"><code class="lang-java"><span class="pln">    </span><span class="com">/**</span></code></li><li class="L2"><code class="lang-java"><span class="com">     * 是否有下一页</span></code></li><li class="L3"><code class="lang-java"><span class="com">     * </span></code></li><li class="L4"><code class="lang-java"><span class="com">     * @return 下一页标识</span></code></li><li class="L5"><code class="lang-java"><span class="com">     */</span></code></li><li class="L6"><code class="lang-java"><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> isHasNextPage</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7"><code class="lang-java"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> getLastPageNumber</span><span class="pun">()</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> getThisPageNumber</span><span class="pun">();</span></code></li><li class="L8"><code class="lang-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L9"><code class="lang-java"></code></li><li class="L0"><code class="lang-java"><span class="pln">    </span><span class="com">/**</span></code></li><li class="L1"><code class="lang-java"><span class="com">     * 是否有上一页</span></code></li><li class="L2"><code class="lang-java"><span class="com">     * </span></code></li><li class="L3"><code class="lang-java"><span class="com">     * @return 上一页标识</span></code></li><li class="L4"><code class="lang-java"><span class="com">     */</span></code></li><li class="L5"><code class="lang-java"><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> isHasPreviousPage</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6"><code class="lang-java"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> getThisPageNumber</span><span class="pun">()</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></code></li><li class="L7"><code class="lang-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L8"><code class="lang-java"></code></li><li class="L9"><code class="lang-java"><span class="pln">    </span><span class="com">/**</span></code></li><li class="L0"><code class="lang-java"><span class="com">     * 获取最后一页页码，也就是总页数</span></code></li><li class="L1"><code class="lang-java"><span class="com">     * </span></code></li><li class="L2"><code class="lang-java"><span class="com">     * @return 最后一页页码</span></code></li><li class="L3"><code class="lang-java"><span class="com">     */</span></code></li><li class="L4"><code class="lang-java"><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> getLastPageNumber</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L5"><code class="lang-java"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> </span><span class="typ">PageUtils</span><span class="pun">.</span><span class="pln">computeLastPageNumber</span><span class="pun">(</span><span class="pln">totalCount</span><span class="pun">,</span><span class="pln"> pageSize</span><span class="pun">);</span></code></li><li class="L6"><code class="lang-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L7"><code class="lang-java"></code></li><li class="L8"><code class="lang-java"><span class="pln">    </span><span class="com">/**</span></code></li><li class="L9"><code class="lang-java"><span class="com">     * 总的数据条目数量，0表示没有数据</span></code></li><li class="L0"><code class="lang-java"><span class="com">     * </span></code></li><li class="L1"><code class="lang-java"><span class="com">     * @return 总数量</span></code></li><li class="L2"><code class="lang-java"><span class="com">     */</span></code></li><li class="L3"><code class="lang-java"><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> getTotalCount</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L4"><code class="lang-java"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> totalCount</span><span class="pun">;</span></code></li><li class="L5"><code class="lang-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L6"><code class="lang-java"></code></li><li class="L7"><code class="lang-java"><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> setTotalCount</span><span class="pun">(</span><span class="kwd">long</span><span class="pln"> totalCount</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L8"><code class="lang-java"><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">totalCount </span><span class="pun">=</span><span class="pln"> totalCount</span><span class="pun">;</span></code></li><li class="L9"><code class="lang-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L0"><code class="lang-java"></code></li><li class="L1"><code class="lang-java"><span class="pln">    </span><span class="com">/**</span></code></li><li class="L2"><code class="lang-java"><span class="com">     * 获取当前页的首条数据的行编码</span></code></li><li class="L3"><code class="lang-java"><span class="com">     * </span></code></li><li class="L4"><code class="lang-java"><span class="com">     * @return 当前页的首条数据的行编码</span></code></li><li class="L5"><code class="lang-java"><span class="com">     */</span></code></li><li class="L6"><code class="lang-java"><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> getThisPageFirstElementNumber</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7"><code class="lang-java"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="pln">getThisPageNumber</span><span class="pun">()</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> getPageSize</span><span class="pun">()</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></code></li><li class="L8"><code class="lang-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L9"><code class="lang-java"></code></li><li class="L0"><code class="lang-java"><span class="pln">    </span><span class="com">/**</span></code></li><li class="L1"><code class="lang-java"><span class="com">     * 获取当前页的末条数据的行编码</span></code></li><li class="L2"><code class="lang-java"><span class="com">     * </span></code></li><li class="L3"><code class="lang-java"><span class="com">     * @return 当前页的末条数据的行编码</span></code></li><li class="L4"><code class="lang-java"><span class="com">     */</span></code></li><li class="L5"><code class="lang-java"><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> getThisPageLastElementNumber</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6"><code class="lang-java"><span class="pln">        </span><span class="kwd">int</span><span class="pln"> fullPage </span><span class="pun">=</span><span class="pln"> getThisPageFirstElementNumber</span><span class="pun">()</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> getPageSize</span><span class="pun">()</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></code></li><li class="L7"><code class="lang-java"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> getTotalCount</span><span class="pun">()</span><span class="pln"> </span><span class="pun">&lt;</span><span class="pln"> fullPage </span><span class="pun">?</span><span class="pln"> getTotalCount</span><span class="pun">()</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> fullPage</span><span class="pun">;</span></code></li><li class="L8"><code class="lang-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L9"><code class="lang-java"></code></li><li class="L0"><code class="lang-java"><span class="pln">    </span><span class="com">/**</span></code></li><li class="L1"><code class="lang-java"><span class="com">     * 获取下一页编码</span></code></li><li class="L2"><code class="lang-java"><span class="com">     * </span></code></li><li class="L3"><code class="lang-java"><span class="com">     * @return 下一页编码</span></code></li><li class="L4"><code class="lang-java"><span class="com">     */</span></code></li><li class="L5"><code class="lang-java"><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> getNextPageNumber</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6"><code class="lang-java"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> getThisPageNumber</span><span class="pun">()</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></code></li><li class="L7"><code class="lang-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L8"><code class="lang-java"></code></li><li class="L9"><code class="lang-java"><span class="pln">    </span><span class="com">/**</span></code></li><li class="L0"><code class="lang-java"><span class="com">     * 获取上一页编码</span></code></li><li class="L1"><code class="lang-java"><span class="com">     * </span></code></li><li class="L2"><code class="lang-java"><span class="com">     * @return 上一页编码</span></code></li><li class="L3"><code class="lang-java"><span class="com">     */</span></code></li><li class="L4"><code class="lang-java"><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> getPreviousPageNumber</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L5"><code class="lang-java"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> getThisPageNumber</span><span class="pun">()</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></code></li><li class="L6"><code class="lang-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L7"><code class="lang-java"></code></li><li class="L8"><code class="lang-java"><span class="pln">    </span><span class="com">/**</span></code></li><li class="L9"><code class="lang-java"><span class="com">     * 每一页显示的条目数</span></code></li><li class="L0"><code class="lang-java"><span class="com">     * </span></code></li><li class="L1"><code class="lang-java"><span class="com">     * @return 每一页显示的条目数</span></code></li><li class="L2"><code class="lang-java"><span class="com">     */</span></code></li><li class="L3"><code class="lang-java"><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> getPageSize</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L4"><code class="lang-java"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> pageSize</span><span class="pun">;</span></code></li><li class="L5"><code class="lang-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L6"><code class="lang-java"></code></li><li class="L7"><code class="lang-java"><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> setPageSize</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> pageSize</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L8"><code class="lang-java"><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">pageSize </span><span class="pun">=</span><span class="pln"> pageSize</span><span class="pun">;</span></code></li><li class="L9"><code class="lang-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L0"><code class="lang-java"></code></li><li class="L1"><code class="lang-java"><span class="pln">    </span><span class="com">/**</span></code></li><li class="L2"><code class="lang-java"><span class="com">     * 当前页的页码</span></code></li><li class="L3"><code class="lang-java"><span class="com">     * </span></code></li><li class="L4"><code class="lang-java"><span class="com">     * @return 当前页的页码</span></code></li><li class="L5"><code class="lang-java"><span class="com">     */</span></code></li><li class="L6"><code class="lang-java"><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> getThisPageNumber</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7"><code class="lang-java"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> pageNumber</span><span class="pun">;</span></code></li><li class="L8"><code class="lang-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L9"><code class="lang-java"></code></li><li class="L0"><code class="lang-java"><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> setPageNumber</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> pageNumber</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code class="lang-java"><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">pageNumber </span><span class="pun">=</span><span class="pln"> pageNumber</span><span class="pun">;</span></code></li><li class="L2"><code class="lang-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L3"><code class="lang-java"></code></li><li class="L4"><code class="lang-java"><span class="pln">    </span><span class="com">/**</span></code></li><li class="L5"><code class="lang-java"><span class="com">     * 得到用于多页跳转的页码</span></code></li><li class="L6"><code class="lang-java"><span class="com">     * </span></code></li><li class="L7"><code class="lang-java"><span class="com">     * @return</span></code></li><li class="L8"><code class="lang-java"><span class="com">     */</span></code></li><li class="L9"><code class="lang-java"><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">Integer</span><span class="pun">&gt;</span><span class="pln"> getLinkPageNumbers</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L0"><code class="lang-java"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> </span><span class="typ">PageUtils</span><span class="pun">.</span><span class="pln">generateLinkPageNumbers</span><span class="pun">(</span><span class="pln">getThisPageNumber</span><span class="pun">(),</span><span class="pln"> getLastPageNumber</span><span class="pun">(),</span><span class="pln"> </span><span class="lit">10</span><span class="pun">);</span></code></li><li class="L1"><code class="lang-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L2"><code class="lang-java"></code></li><li class="L3"><code class="lang-java"><span class="pln">    </span><span class="com">/**</span></code></li><li class="L4"><code class="lang-java"><span class="com">     * 得到数据库的第一条记录号</span></code></li><li class="L5"><code class="lang-java"><span class="com">     * </span></code></li><li class="L6"><code class="lang-java"><span class="com">     * @return</span></code></li><li class="L7"><code class="lang-java"><span class="com">     */</span></code></li><li class="L8"><code class="lang-java"><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> getFirstResult</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L9"><code class="lang-java"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> </span><span class="typ">PageUtils</span><span class="pun">.</span><span class="pln">getFirstResult</span><span class="pun">(</span><span class="pln">pageNumber</span><span class="pun">,</span><span class="pln"> pageSize</span><span class="pun">);</span></code></li><li class="L0"><code class="lang-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L1"><code class="lang-java"></code></li><li class="L2"><code class="lang-java"><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Iterator</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;</span><span class="pln"> iterator</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L3"><code class="lang-java"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="typ">Iterator</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;)</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span><span class="pln"> </span><span class="pun">?</span><span class="pln"> </span><span class="typ">Collections</span><span class="pun">.</span><span class="pln">emptyList</span><span class="pun">().</span><span class="pln">iterator</span><span class="pun">()</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> result</span><span class="pun">.</span><span class="pln">iterator</span><span class="pun">());</span></code></li><li class="L4"><code class="lang-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L5"><code class="lang-java"></code></li><li class="L6"><code class="lang-java"><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> isPagination</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7"><code class="lang-java"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> isPagination</span><span class="pun">;</span></code></li><li class="L8"><code class="lang-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L9"><code class="lang-java"></code></li><li class="L0"><code class="lang-java"><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> setPagination</span><span class="pun">(</span><span class="kwd">boolean</span><span class="pln"> isPagination</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code class="lang-java"><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">isPagination </span><span class="pun">=</span><span class="pln"> isPagination</span><span class="pun">;</span></code></li><li class="L2"><code class="lang-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L3"><code class="lang-java"><span class="pun">}</span></code></li></ol></pre>
<h3 id="h3--sort-"><a name="排序（Sort类）" class="reference-link"></a><span class="header-link octicon octicon-link"></span>排序（Sort类）</h3><pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="lang-java"><span class="typ">Sort</span><span class="pln"> sort</span><span class="pun">=</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Sort</span><span class="pun">(</span><span class="typ">Direction</span><span class="pun">.</span><span class="pln">ASC</span><span class="pun">,</span><span class="str">"id"</span><span class="pun">);</span></code></li></ol></pre>
<p>  其中第一个参数表示是降序还是升序（此处表示升序），第二个参数表示你要按你的实体类的，不是数据库的中的那个变量进行排序。如果要多个排序呢</p>
<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="lang-java"><span class="pln">  </span><span class="com">//多个排序，用Map，再创建对象</span></code></li><li class="L1"><code class="lang-java"><span class="pln"> </span><span class="typ">Map</span><span class="pun">&lt;</span><span class="typ">String</span><span class="pun">,</span><span class="pln"> </span><span class="typ">String</span><span class="pun">&gt;</span><span class="pln"> orders </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">HashMap</span><span class="pun">&lt;&gt;(</span><span class="lit">2</span><span class="pun">);</span></code></li><li class="L2"><code class="lang-java"><span class="pln">        orders</span><span class="pun">.</span><span class="pln">put</span><span class="pun">(</span><span class="str">"top"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"desc"</span><span class="pun">);</span></code></li><li class="L3"><code class="lang-java"><span class="pln">        orders</span><span class="pun">.</span><span class="pln">put</span><span class="pun">(</span><span class="str">"post"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"desc"</span><span class="pun">);</span></code></li><li class="L4"><code class="lang-java"><span class="pln">        </span><span class="typ">Sort</span><span class="pln"> sort </span><span class="pun">=</span><span class="pln"> getJpaSortWithOther</span><span class="pun">(</span><span class="pln">pagination</span><span class="pun">,</span><span class="pln"> orders</span><span class="pun">);</span></code></li></ol></pre>
<p>有了这个类，我们可以放在分页中查询，也可以放在普通的查询：</p>
<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="lang-java"><span class="com">//根据文章自定义链接查找文章对象</span></code></li><li class="L1"><code class="lang-java"><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">NBArticle</span><span class="pun">&gt;</span><span class="pln"> findNBArticleByUrlSequence</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> urlSeq</span><span class="pun">，</span><span class="typ">Sort</span><span class="pln"> sort</span><span class="pun">);</span></code></li></ol></pre>
<h3 id="h3--pom-xml-"><a name="配置文件(pom.xml)" class="reference-link"></a><span class="header-link octicon octicon-link"></span>配置文件(pom.xml)</h3><p>说了那么多，那我们怎么配置jpa呢，在SpringBoot中，我们引用下面的文件，其他配置SpringBoot会帮我们自动配置</p>
<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="lang-java"><span class="pln"> </span><span class="pun">&lt;</span><span class="pln">dependency</span><span class="pun">&gt;</span></code></li><li class="L1"><code class="lang-java"><span class="pln">        </span><span class="pun">&lt;</span><span class="pln">groupId</span><span class="pun">&gt;</span><span class="pln">org</span><span class="pun">.</span><span class="pln">springframework</span><span class="pun">.</span><span class="pln">boot</span><span class="pun">&lt;/</span><span class="pln">groupId</span><span class="pun">&gt;</span></code></li><li class="L2"><code class="lang-java"><span class="pln">        </span><span class="pun">&lt;</span><span class="pln">artifactId</span><span class="pun">&gt;</span><span class="pln">spring</span><span class="pun">-</span><span class="pln">boot</span><span class="pun">-</span><span class="pln">starter</span><span class="pun">-</span><span class="pln">data</span><span class="pun">-</span><span class="pln">jpa</span><span class="pun">&lt;/</span><span class="pln">artifactId</span><span class="pun">&gt;</span></code></li><li class="L3"><code class="lang-java"><span class="pun">&lt;/</span><span class="pln">dependency</span><span class="pun">&gt;</span></code></li></ol></pre>
<h3 id="h3--yaml-"><a name="配置文件（yaml）" class="reference-link"></a><span class="header-link octicon octicon-link"></span>配置文件（yaml）</h3><pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="lang-yaml"><span class="com">#数据访问配置</span></code></li><li class="L1"><code class="lang-yaml"><span class="pln">  jpa</span><span class="pun">:</span></code></li><li class="L2"><code class="lang-yaml"><span class="pln">    database</span><span class="pun">:</span><span class="pln"> mysql</span></code></li><li class="L3"><code class="lang-yaml"><span class="pln">    hibernate</span><span class="pun">:</span></code></li><li class="L4"><code class="lang-yaml"><span class="pln">      ddl</span><span class="pun">-</span><span class="kwd">auto</span><span class="pun">:</span><span class="pln"> update</span></code></li><li class="L5"><code class="lang-yaml"><span class="pln">    show</span><span class="pun">-</span><span class="pln">sql</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">true</span></code></li><li class="L6"><code class="lang-yaml"><span class="pln">    database</span><span class="pun">-</span><span class="pln">platform</span><span class="pun">:</span><span class="pln"> me</span><span class="pun">.</span><span class="pln">wuwenbin</span><span class="pun">.</span><span class="pln">noteblogv4</span><span class="pun">.</span><span class="pln">config</span><span class="pun">.</span><span class="pln">configuration</span><span class="pun">.</span><span class="typ">LocalMySQL57InnoDBDialect</span></code></li><li class="L7"><code class="lang-yaml"><span class="pln">  jackson</span><span class="pun">:</span></code></li><li class="L8"><code class="lang-yaml"><span class="pln">    date</span><span class="pun">-</span><span class="pln">format</span><span class="pun">:</span><span class="pln"> yyyy</span><span class="pun">-</span><span class="pln">MM</span><span class="pun">-</span><span class="pln">dd HH</span><span class="pun">:</span><span class="pln">mm</span><span class="pun">:</span><span class="pln">ss</span></code></li><li class="L9"><code class="lang-yaml"><span class="pln">  </span><span class="com">#最大上传文件大小</span></code></li><li class="L0"><code class="lang-yaml"><span class="pln">  servlet</span><span class="pun">:</span></code></li><li class="L1"><code class="lang-yaml"><span class="pln">    multipart</span><span class="pun">:</span></code></li><li class="L2"><code class="lang-yaml"><span class="pln">      max</span><span class="pun">-</span><span class="pln">file</span><span class="pun">-</span><span class="pln">size</span><span class="pun">:</span><span class="pln"> </span><span class="lit">20MB</span></code></li><li class="L3"><code class="lang-yaml"><span class="pln">  cache</span><span class="pun">:</span></code></li><li class="L4"><code class="lang-yaml"><span class="pln">    </span><span class="com">#使用默认的ConcurrentMap</span></code></li><li class="L5"><code class="lang-yaml"><span class="pln">    type</span><span class="pun">:</span><span class="pln"> simple</span></code></li><li class="L6"><code class="lang-yaml"><span class="pln">    </span><span class="com">#程序启动时创建的缓存名称</span></code></li><li class="L7"><code class="lang-yaml"><span class="pln">    cache</span><span class="pun">-</span><span class="pln">names</span><span class="pun">:</span><span class="pln"> paramCache</span><span class="pun">,</span><span class="pln">authCache</span></code></li></ol></pre>
</div>
                                      </div>
                                   <div class="layui-row text-center layui-mt20">
                                           
                                           <div class="layui-btn layui-btn-danger" onclick="emotion()"><i class="fa fa-thumbs-o-up" id="za"> 赞 (26)</i></div>
                                       </div>
                                   <div class="layui-row layui-mt20">
                                         <blockquote class="layui-elem-quote text-center " style="border: none;">
                                                  <span class="layui-show-md-inline-block layui-hide"  >文章出处：书生个人博客</span>&nbsp;&nbsp;&nbsp;&nbsp;
                                   <span class="layui-show-md-inline-block layui-hide" id="artiurl"></span>&nbsp;&nbsp;&nbsp;&nbsp;
                                                  <span>转载注明下哦！o(≧v≦)o~~</span>
                                           </blockquote>
                                    </div>
                                 <div class="layui-row layui-mt20">
                                         <p class="blog-tags">
                                              标签：
                                                       <span >springboot系列</span>

                                               </p>
                                 </div>
                                 <div class="layui-row layui-col-space20 layui-mt20 article-page-similar">
                                           <p>相似文章：</p>
                                            <hr>
                                             <ul>
                                                    <li><a href="1562823806738.html"><i class="fa fa-circle-thin"></i>&nbsp;&nbsp;Kaptcha的详细配置表以及在springboot中的整合和使用</a> </li>
                                                    <li><a href="1556780360345.html"><i class="fa fa-circle-thin"></i>&nbsp;&nbsp;申请阿里云免费的HTTPS证书和SpringBoot配置HTTPS与HTTP重定向成HTTPS</a> </li>
                                                    <li><a href="1563339259314.html"><i class="fa fa-circle-thin"></i>&nbsp;&nbsp;SpringBoot中集成Log4j2以及Log4j2的xml配置</a> </li>
                                                    <li><a href="1553356568899.html"><i class="fa fa-circle-thin"></i>&nbsp;&nbsp;SpringBoot使用Quartz实现定时器功能</a> </li>
                                                    <li><a href="1556270567076.html"><i class="fa fa-circle-thin"></i>&nbsp;&nbsp;将SpringBoot项目打成WAR包</a> </li>
                                                    <li><a href="1552469919154.html"><i class="fa fa-circle-thin"></i>&nbsp;&nbsp;javaweb的spi 的简单应用</a> </li>
                                                    <li><a href="1551367255238.html"><i class="fa fa-circle-thin"></i>&nbsp;&nbsp;SpringMVC和SpringBoot如何接收参数或者绑定参数</a> </li>
                                                    <li><a href="1548313770791.html"><i class="fa fa-circle-thin"></i>&nbsp;&nbsp;SpringBoot整合JavaMail，配置JavaMailSender，邮件发送(模板，附件，HTML邮件发送)</a> </li>
                                                    <li><a href="1548057271567.html"><i class="fa fa-circle-thin"></i>&nbsp;&nbsp;Thymeleaf 如何格式化LocalDate和LocalDatetime类型时间</a> </li>
                                                    <li><a href="1547913714464.html"><i class="fa fa-circle-thin"></i>&nbsp;&nbsp;SpringBoot之一些小技巧的合集</a> </li>
                                              </ul>
                                    </div>
                               </div>
                      <script>
                          $("#artiurl").html("文章地址："+location.href);


                      </script>

                       </div></div>

                </div>

               <div  >
<div id="cta" class="layui-collapse layui-panel layui-article">
       <div class="layui-colla-item">
               <div class="layui-colla-content layui-show layui-article comment">
                       <fieldset class="layui-elem-field layui-field-title">
                               <legend>随便说两句</legend>
                               <div class="layui-field-box">
                                       <label for="comment-input"></label>
                                           <textarea id="comment-input" style="display: none;"></textarea>
                                  </div>
                               
                               <a class="layui-btn layui-btn-sm layui-btn-danger" style="float: right;width: 120px;"  href="#"  onclick="javascript:beforeLogin()" id="beforeLogin"><i class="fa fa-qq"></i> 请先登录</a>
                           </fieldset>
                   </div>
           </div>
    </div>
</div>
<script>
    function beforeLogin() {
        var url=window.location.href;
        window.open('/api/qq?url='+url,'_self');
    }

</script>

               <blockquote id="cccc" class="layui-elem-quote layui-mt20" style="border-left: 5px solid #F44336;"><span style="color:#FF5722;">遵守国家法律法规，请勿回复无意义内容，请不要回复嵌套过多的楼层！</span></blockquote>
               <div class="comment-list">

</div>




           </div>
               <!--<div class="layui-col-md3" id="article-app">-->
                       <!--<div id="affix-side">-->
                           <!--<div th:replace="frontend/fragment/callme :: callme" ></div>-->
                           <!--&lt;!&ndash;<div class="layui-tab layui-tab-card layui-master-recommend" >&ndash;&gt;-->
                               <!--&lt;!&ndash;<div class="layui-tab-content select-none">&ndash;&gt;-->
                                   <!--&lt;!&ndash;<h3 class="tit">时光悄然</h3>&ndash;&gt;-->
                                   <!--&lt;!&ndash;<div class="layui-inline" id="test22"></div>&ndash;&gt;-->
                               <!--&lt;!&ndash;</div>&ndash;&gt;-->
                           <!--&lt;!&ndash;</div>&ndash;&gt;-->
                           <!--<div th:replace ="frontend/fragment/guidang" ></div>-->
                           <!--<div th:replace ="frontend/fragment/imageinfo" ></div>-->
                           <!--<div th:replace ="frontend/fragment/cate" ></div>-->
                           <!--<div th:insert ="frontend/fragment/lot :: lot (${similarArticles},${'相关文章'})" ></div>-->
                           <!--<div th:replace ="frontend/fragment/image :: image"></div>-->
                           <!--</div>-->
                   <!--</div>-->
           </div>
    </div>


    <footer >
    <div class="footer"><p>
	<span><strong>友情链接:</strong><strong>&nbsp;</strong> &nbsp;&nbsp;</span><a class="ke-insertfile" href="https://www.layui.com/" target="_blank">layui</a><span>&nbsp;&nbsp;</span>&nbsp;<a class="ke-insertfile" href="http://www.shuyong.net/" target="_blank">舍力博客</a>&nbsp;&nbsp;<a class="ke-insertfile" href="javascript:;" id="friend">申请友链</a> 
</p>
<p>
	2018-2019 nonelonely.com | 网站备案号：<a class="ke-insertfile" href="http://www.miitbeian.gov.cn/" target="_blank">闽ICP备18026034号-1</a> 
</p>
<p>
	<br />
</p></div>

    <div class="layui-hide-xs" style="position: fixed;left: 100px; bottom: 100px; z-index: 999999;" id="robot" data-method="robot">
        <div class="layui-layer-tips" ><div id="" class="layui-layer-content" style="background-color: rgb(114, 193, 236);width: 150px">Hi 我是小码，可以点击我问我笑话，天气，智能聊天，故事，查询备案等等。<i class="layui-layer-TipsG layui-layer-TipsT" style="border-right-color:rgb(114, 193, 236);"></i></div><span class="layui-layer-setwin"></span></div>
        <a href="#" ><img src="../static/assets/img/robot.png" width="100px" alt="Hi 我是小码！" >
        </a>
    </div>


</footer>
<script src="../static/plugins/layui/layui.js"></script>

<script>
    layui.use([ 'layer'], function () {
        var layer = layui.layer;
        var $ = layui.jquery;
        //触发事件
        var active = {
            robot: function(){
                var that = this;
                $("#robot").css('display','none');
                //多窗口模式，层叠置顶
                layer.open({
                    type: 2,
                    title:'智能小码',
                    area: ['600px', '480px'],
                    content: '/webrobot',
                    end:function () {
                        $("#robot").css('display','');
                    }
                });
            },
            friend: function () {
                layer.open({
                    title: '申请友链'
                    ,content: '发送邮件至：admin@nonelonely.com<br>' +
                        '邮件标题为：申请书生个人博客友链'
                });
            }
        };

        $('#robot').on('click', function(){
            var othis = $(this), method = othis.data('method');
            active[method] ? active[method].call(this, othis) : '';
        });
        $('#friend').on('click', function(){
            var othis = $(this), method = 'friend';
            active[method] ? active[method].call(this, othis) : '';
        });


        // var la;
            // la = layer.tips('Hi 我是小码，什么问题都可以问我咯。', '#robot',
            //     {
            //         tips: [1, '#3595CC'],
            //         end: function () {
            //             if($("#robot").is(":visible")) {
            //                 la = layer.tips('可以问我笑话，天气，智能聊天，故事，查询备案等等', '#robot',
            //                     {tips: [1, '#3595CC']})
            //             }
            //         }
            //     });
            // window.setInterval(" if($('#robot').is(':visible')) {la=layer.tips('Hi 我是小码，什么问题都可以问我咯。', '#robot', { tips: [1, '#3595CC'],end : function(){ la=layer.tips('可以问我笑话，天气，智能聊天，故事，查询备案等等', '#robot', {tips: [1, '#3595CC']});}});}", 10000*6 );

    });
</script>

</div>




<script>
    var articleId=1547789396163;
    var su=null ;
    $(function(){
        $(".comment-list").addCommentList({data:[],add:""});
        $("#comment").click(function(){
            var obj = new Object();
            obj.img="images/img.html";
            obj.replyName="匿名";
            obj.content=$("#content").val();
            obj.browse="深圳";
            obj.osname="win10";
            obj.replyBody="";
            $(".comment-list").addCommentList({data:[],add:obj});
        });
    })

    var layer;
    var layedit;
    var index;
    layui.use(['layedit', 'laypage', 'laydate', 'element','layer'], function () {
        layer = layui.layer;
        var element = layui.element;
        layedit = layui.layedit;
        // var laydate = layui.laydate;
        // //不出现底部栏
        // laydate.render({
        //     elem: '#test22'
        //     ,showBottom: false
        //     ,position: 'static'
        //     ,calendar: true
        //     ,theme: '#a7a4a4'
        // });

       index= layedit.build('comment-input', {
            tool: ['face', '|', 'left', 'center', 'right', 'link', 'unlink']
            , height: 150
        });
        //相册
        if($(window).width() > 750){
            layer.photos({
                photos: '.photos'
                ,zIndex: 9999999999
                ,anim: -1
            });
        } else {
            $('body').on('click', '.photos img', function(){
                window.open(this.src);
            });
        }

            layer.open({
                title: '目录',
                type: 1,
                offset: 'r',
                shade: 0,
                closeBtn: 2,
                content: $(".markdown-toc")
            });

        // $('#affix-side').hcSticky({
        //     stickTo: '#blog-body'
        // });

    });
    function submit() {

        var osname = detectOS();

        var obj = new Object();
        if (su) {
           obj.img = su.avatar;
           obj.replyName = su.nickname;
        }
        obj.content=layedit.getContent(index);
        obj.browse=navigator.appName;
        obj.osname=osname;
        obj.time=new Date();
        obj.replyBody="";

        obj.comment= obj.content;
        if(!obj.comment){
            layer.msg('不能为空');
            return false;
        }
        var indexc = layer.load();
        obj.userId=su.id;
        obj.user=su.id;
        obj.articleId=articleId;
        obj.enable=true;
        obj.parentId=0;

         obj.time =new Date();




        $.post("/token/comment/sub",obj, function (resp) {
            layer.close(indexc);
            $(window.frames["LAY_layedit_1"].document).find("body").html('');
            layer.msg(resp.message);
            setTimeout(function () {
                if (resp.code === 200) {
                    $(".comment-list").addCommentList({data:[],add:obj});
                }
            }, 1000);
        });

    };

    function emotion() {
        var uid = "guest";
        if (BMY.getCookie("article::" + 1547789396163 + "::" + uid) != null) {
            layer.msg("近期您已经点过赞，感谢您的支持！");
        } else {
            $.post("/article/approve", {articleId: 1547789396163}, function (json) {
                if (json.code === BMY.status.ok) {
                    BMY.setCookie("article::" + 1547789396163+ "::" + uid, "noteblog system");
                  //  that.approve++;
                    $('#za').html('赞 (27)')
                    layer.msg("谢谢您的支持！");
                }
            })
        }
    }
    function money  (alipay, wechat) {
        alipay = "#\/static\/assets\/img\/wechat.png";
        wechat="#\/static\/assets\/img\/alipay.png";
        layer.open({
            type: 1,
            title: false,
            closeBtn: 0,
            area: ['640px', '300px'],
            shadeClose: true,
            skin: 'text-center',
            content:
                '<div class="layui-fluid">' +
                '   <div class="layui-row layui-mt20">' +
                '       <div class="layui-col-md6">' +
                '           <img src="' + wechat + '" style="height: 250px;width: 250px;">' +
                '           <p class="text-center">微信</p>' +
                '       </div>' +
                '       <div class="layui-col-md6">' +
                '           <img src="' + alipay + '" style="height: 250px;width: 250px;">' +
                '           <p class="text-center">支付宝</p>' +
                '       </div>' +
                '   </div> ' +
                '</div>'
        });
    }




</script>
<script src="../static/assets/js/jquery.comment.js" ></script>
</body>

<!-- Mirrored from www.nonelonely.com/article/1547789396163 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 09 Sep 2019 05:04:28 GMT -->
</html>